---
title: Configuring proxy settings for the BOSH CPI
owner: Ops Manager
---

This topic describes how to configure proxy settings for the BOSH Cloud Provider Interface (CPI), the API that the BOSH Director uses to interact with your IaaS endpoint. If you use a proxy to mediate traffic between your BOSH installation and your IaaS endpoint, you must enter your proxy information when <%= vars.ops_manager_first %> starts for the first time.

The following diagram illustrates how a proxy mediates HTTP and HTTPS requests between the CPI of the BOSH Director and the IaaS endpoint.

![alt-text="The IaaS API connects to the the BOSH Director through a proxy that connects to the BOSH CPI."](images/cpi-proxy.png)

For more information about BOSH components, see
the [BOSH documentation](https://bosh.io/docs/bosh-components.html).

<p> <%= vars.ops_manager %> only supports proxying requests between the BOSH CPI and the IaaS API. It does
not support proxying blobstore and database traffic.</p>

## <a id='config-proxy'></a> Configure the proxy

Complete the following steps to configure your proxy for the BOSH CPI when <%= vars.ops_manager %> starts for the first time:

1. Ensure that you have installed your proxy and that it is functioning properly. You can install one proxy for HTTPS requests and another proxy for HTTP requests, or choose to use the same proxy for both kinds of traffic.

1. Follow the <%= vars.ops_manager %> installation instructions for your IaaS.

For more information,
see [Installing <%= vars.ops_manager %>](https://docs.vmware.com/en/VMware-Tanzu-Operations-Manager/3.0/vmware-tanzu-ops-manager/install-install-index.html).

1. When <%= vars.ops_manager %> starts for the first time, you must select **Use an Identity Provider** or **Internal Authentication**. For more information, see the following IaaS-specific topics:
    * [Configuring BOSH Director on AWS](../aws/config-manual.html#access-om)
    * [Configuring BOSH Director on vSphere](../vsphere/config.html#set-up)
    * [Configuring BOSH Director on OpenStack](../openstack/config.html#log-in)

1. Both the **Use an Identity Provider** and the **Internal Authentication** login pages include fields for **HTTP proxy**, **HTTPS proxy**, and **No proxy**.

For the <%= vars.app_runtime_first %> runtime, editing proxy settings in the BOSH Director propagates
those settings to the Garden Diego cells in <%= vars.app_runtime_abbr %>. Sharing these proxy settings
between <%= vars.ops_manager %> and <%= vars.app_runtime_abbr %> enables you to reach a Docker Hub
through a proxy within an environment that lacks internet connectivity.

Complete the fields with the following information:

* **HTTP proxy:** Enter the URL for the proxy that handles HTTPS requests between the BOSH CPI and the IaaS API.
* **HTTPS proxy:** Enter the URL for the proxy that handles HTTP requests between the BOSH CPI and the IaaS API. If you are using the same proxy to handle both HTTPS and HTTP traffic, enter the same URL as **HTTP proxy**.
* **No proxy:** Enter the following IP addresses:
    * `127.0.0.1`
  * The IP address of your BOSH Director. This is the first IP address not in your reserved range. For example, if you enter `10.0.16.0-10.0.16.10` in the **Reserved IP Ranges** field of the **Create Networks** page when configuring the BOSH Director, the BOSH Director IP is `10.0.16.11`.

      When the BOSH Director talks to other components on its VM, such as the database and the User Account and Authentication (UAA) module, it communicates with them as if they were external. You must enter the BOSH Director IP address in the no-proxy list to prevent traffic from the BOSH Director to other
      components on the same VM from passing through the proxy.

      The values in the <strong>No Proxy</strong> field must be comma-delimited, with no spaces or quotation marks between values.

      Example: <code>127.0.0.1,10.0.16.11</code>.
